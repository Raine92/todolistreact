import{a,r as t}from"./react-DbDLwz_u.js";import{_ as $e,M as Je,a as ge,C as Re,E as ue,A as ae,H as Ae,b as Ke,G as qe,c as Qe,R as Ye,d as Ze,T as Xe,e as et,f as tt,g as st,h as rt,B as nt,V as ot,i as at,j as ct,k as lt,F as it,O as ut,l as dt,m as pt,n as mt,o as we,p as ht,q as ft,r as Ct,s as gt}from"./ag-grid-community-DqHcE3DC.js";import{r as Te,R as Rt}from"./react-dom-TIU4SsXv.js";var Z=a.createContext({}),he=(e,s,r,o)=>{if(!e||e.componentFromFramework||s.isDestroyed())return;const p=e.newAgStackInstance();if(p==null)return;let i,c,d=!1;return p.then(l=>{if(d){s.destroyBean(l);return}i=l,c=i.getGui(),r.appendChild(c),Ge(o,i)}),()=>{var l;d=!0,i&&((l=c==null?void 0:c.parentElement)==null||l.removeChild(c),s.destroyBean(i),o&&Ge(o,void 0))}},Ge=(e,s)=>{if(e)if(e instanceof Function)e(s);else{const r=e;r.current=s}},se=(...e)=>e.filter(r=>r!=null&&r!=="").join(" "),te=class Ne{constructor(...s){this.classesMap={},s.forEach(r=>{this.classesMap[r]=!0})}setClass(s,r){if(!!this.classesMap[s]==r)return this;const n=new Ne;return n.classesMap={...this.classesMap},n.classesMap[s]=r,n}toString(){return Object.keys(this.classesMap).filter(r=>this.classesMap[r]).join(" ")}},de=e=>{const s=()=>typeof Symbol=="function"&&Symbol.for,r=()=>s()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===r()},We,Ee=(We=a.version)==null?void 0:We.split(".")[0],yt=Ee==="16"||Ee==="17";function vt(){return Ee==="19"}var Ce=!1;function wt(e){return Ce||setTimeout(()=>Ce=!1,0),Ce=!0,e()}var be=(e,s)=>{!yt&&e&&!Ce?Rt.flushSync(s):s()};function Pe(e,s,r){if(s==null||e==null)return s;if(e===s||s.length===0&&e.length===0)return e;if(r||e.length===0&&s.length>0||e.length>0&&s.length===0)return s;const o=[],n=[],p=new Map,i=new Map;for(let c=0;c<s.length;c++){const d=s[c];i.set(d.instanceId,d)}for(let c=0;c<e.length;c++){const d=e[c];p.set(d.instanceId,d),i.has(d.instanceId)&&o.push(d)}for(let c=0;c<s.length;c++){const d=s[c],l=d.instanceId;p.has(l)||n.push(d)}return o.length===e.length&&n.length===0?e:o.length===0&&n.length===s.length?s:o.length===0?n:n.length===0?o:[...o,...n]}var He=t.forwardRef((e,s)=>{var W;const{ctrlsFactory:r,context:o}=t.useContext(Z),n=t.useRef(null),p=t.useRef(null),i=t.useRef(null),c=t.useRef(null),d=t.useRef(null),l=t.useRef(),[u,R]=t.useState(),[P,S]=t.useState(),[C,g]=t.useState(),[h,m]=t.useState(()=>new te),[b,v]=t.useState(()=>new te("ag-hidden")),[f,E]=t.useState(()=>new te("ag-hidden")),[G,k]=t.useState(()=>new te("ag-invisible"));t.useImperativeHandle(s,()=>({refresh(){return!1}})),t.useLayoutEffect(()=>he(u,o,p.current),[u]);const F=t.useCallback(A=>{if(n.current=A,!A){l.current=o.destroyBean(l.current);return}const H={setInnerRenderer:(V,I)=>{R(V),g(I)},setChildCount:V=>S(V),addOrRemoveCssClass:(V,I)=>m(X=>X.setClass(V,I)),setContractedDisplayed:V=>E(I=>I.setClass("ag-hidden",!V)),setExpandedDisplayed:V=>v(I=>I.setClass("ag-hidden",!V)),setCheckboxVisible:V=>k(I=>I.setClass("ag-invisible",!V))},_=r.getInstance("groupCellRendererCtrl");_&&(l.current=o.createBean(_),l.current.init(H,A,i.current,c.current,d.current,He,e))},[]),x=t.useMemo(()=>`ag-cell-wrapper ${h.toString()}`,[h]),B=t.useMemo(()=>`ag-group-expanded ${b.toString()}`,[b]),y=t.useMemo(()=>`ag-group-contracted ${f.toString()}`,[f]),w=t.useMemo(()=>`ag-group-checkbox ${G.toString()}`,[G]),N=u&&u.componentFromFramework,D=N?u.componentClass:void 0,$=u==null&&C!=null,O=$e(C,!0);return a.createElement("span",{className:x,ref:F,...e.colDef?{}:{role:(W=l.current)==null?void 0:W.getCellAriaRole()}},a.createElement("span",{className:B,ref:c}),a.createElement("span",{className:y,ref:d}),a.createElement("span",{className:w,ref:i}),a.createElement("span",{className:"ag-group-value",ref:p},$&&a.createElement(a.Fragment,null,O),N&&a.createElement(D,{...u.params})),a.createElement("span",{className:"ag-group-child-count"},P))}),Ie=He,ke=t.createContext({setMethods:()=>{}}),St=e=>{const{initialProps:s,addUpdateCallback:r,CustomComponentClass:o,setMethods:n}=e,[{key:p,...i},c]=t.useState(s);return t.useEffect(()=>{r(d=>c(d))},[]),a.createElement(ke.Provider,{value:{setMethods:n}},a.createElement(o,{key:p,...i}))},Et=t.memo(St),bt=0;function xe(){return`agPortalKey_${++bt}`}var Ue=class{constructor(e,s,r,o){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=s,this.componentType=r,this.suppressFallbackMethods=!!o,this.statelessComponent=this.isStateless(this.reactComponent),this.key=xe(),this.portalKey=xe(),this.instanceCreated=this.isStatelessComponent()?ae.resolve(!1):new ae(n=>{this.resolveInstanceCreated=n})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const s=this.portalManager.getComponentWrappingElement(),r=document.createElement(s||"div");return r.classList.add("ag-react-container"),e.reactContainer=r,r}addParentContainerStyleAndClasses(){this.componentInstance&&(this.componentInstance.getReactContainerStyle&&this.componentInstance.getReactContainerStyle()&&(ge('Since v31.1 "getReactContainerStyle" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),Object.assign(this.eParentElement.style,this.componentInstance.getReactContainerStyle())),this.componentInstance.getReactContainerClasses&&this.componentInstance.getReactContainerClasses()&&(ge('Since v31.1 "getReactContainerClasses" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),this.componentInstance.getReactContainerClasses().forEach(s=>this.eParentElement.classList.add(s))))}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const s=this.getFrameworkComponentInstance();return!!s&&s[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,s){const r=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,s&&s[0]?s[0]:{});if(!r){setTimeout(()=>this.callMethod(e,s));return}const o=r[e];if(o)return o.apply(r,s);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,s&&s[0]?s[0]:{})}addMethod(e,s){this[e]=s}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new ae(s=>this.createReactComponent(s))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=s=>{var r;this.componentInstance=s,this.addParentContainerStyleAndClasses(),(r=this.resolveInstanceCreated)==null||r.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=Te.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,s){return t.createElement(e,s)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,s){const r=this[`${e}Component`];if(!this.suppressFallbackMethods&&r)return r.bind(this)(s)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function Me(e,s,r){e.forEach(o=>{const n=s[o];n&&(r[o]=n)})}var oe=class extends Ue{constructor(){super(...arguments),this.awaitUpdateCallback=new ae(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=Et}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,s){return super.createElement(this.wrapperComponent,{initialProps:s,CustomComponentClass:e,setMethods:r=>this.setMethods(r),addUpdateCallback:r=>{this.updateCallback=()=>(r(this.getProps()),new ae(o=>{setTimeout(()=>{o()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,Me(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new ae(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},Pt=class extends oe{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},kt=class extends oe{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},Mt=class extends oe{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,s){this.icon=e,this.shake=s,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:s,icon:r,shake:o}=this;return e.label=s,e.icon=r,e.shake=o,e}},Ft=class extends oe{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterChangedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){var s;this.expectingNewMethods===!1&&this.hasBeenActive&&((s=this.providedMethods)==null?void 0:s.doesFilterPass)!==(e==null?void 0:e.doesFilterPass)&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e)}updateModel(e){this.setModel(e).then(()=>this.sourceParams.filterChangedCallback())}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,delete e.valueGetter,e}};function Ve(e,s){e.parentFilterInstance(r=>{(r.setModel(s)||ae.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var Bt=class{constructor(e,s){this.floatingFilterParams=e,this.refreshProps=s,this.model=null,this.onModelChange=r=>this.updateModel(r)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Me(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),Ve(this.floatingFilterParams,e)}},At=class extends oe{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),Ve(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},Gt=class extends oe{refresh(e){this.sourceParams=e,this.refreshProps()}},It=class extends oe{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const s=this.awaitSetActive(e);e&&s.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},xt=class extends oe{refresh(e){this.sourceParams=e,this.refreshProps()}},Ot=class extends oe{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Dt=class extends oe{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function Fe(){ge("As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.")}var Wt=1e3,Tt=class{constructor(e,s,r){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=s||"div",this.refresher=e,this.maxComponentCreationTimeMs=r||Wt}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(s=>s!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,s,r){this.portals=[...this.portals,e],this.waitForInstance(s,r),this.batchUpdate()}updateReactPortal(e,s){this.portals[this.portals.indexOf(e)]=s,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,s,r=Date.now()){if(this.destroyed){s(null);return}if(e.rendered())s(e);else{if(Date.now()-r>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return;window.setTimeout(()=>{this.waitForInstance(e,s,r)})}}},Nt=({ctrl:e})=>{const s=e.isAlive(),{context:r}=t.useContext(Z),o=s?e.getColId():void 0,[n,p]=t.useState(),i=t.useRef(),c=t.useRef(null),d=t.useRef(null),l=t.useRef(null),u=t.useRef(),R=t.useRef();s&&!R.current&&(R.current=new Re(()=>c.current));const P=t.useCallback(h=>{var v;if(c.current=h,i.current=h?r.createBean(new ue):r.destroyBean(i.current),!h||!s)return;const m={setWidth:f=>{c.current&&(c.current.style.width=f)},addOrRemoveCssClass:(f,E)=>R.current.addOrRemoveCssClass(f,E),setAriaSort:f=>{c.current&&(f?at(c.current,f):ct(c.current))},setUserCompDetails:f=>p(f),getUserCompInstance:()=>u.current||void 0};e.setComp(m,h,d.current,l.current,i.current);const b=e.getSelectAllGui();(v=d.current)==null||v.insertAdjacentElement("afterend",b),i.current.addDestroyFunc(()=>b.remove())},[]);t.useLayoutEffect(()=>he(n,r,l.current,u),[n]),t.useEffect(()=>{e.setDragSource(c.current)},[n]);const S=t.useMemo(()=>!!((n==null?void 0:n.componentFromFramework)&&de(n.componentClass)),[n]),C=n&&n.componentFromFramework,g=n&&n.componentClass;return a.createElement("div",{ref:P,className:"ag-header-cell","col-id":o,role:"columnheader"},a.createElement("div",{ref:d,className:"ag-header-cell-resize",role:"presentation"}),a.createElement("div",{ref:l,className:"ag-header-cell-comp-wrapper",role:"presentation"},C&&S&&a.createElement(g,{...n.params}),C&&!S&&a.createElement(g,{...n.params,ref:u})))},Ht=t.memo(Nt),Ut=({ctrl:e})=>{const{context:s,gos:r}=t.useContext(Z),[o,n]=t.useState(()=>new te("ag-header-cell","ag-floating-filter")),[p,i]=t.useState(()=>new te),[c,d]=t.useState(()=>new te("ag-floating-filter-button","ag-hidden")),[l,u]=t.useState("false"),[R,P]=t.useState(),[,S]=t.useState(1),C=t.useRef(),g=t.useRef(null),h=t.useRef(null),m=t.useRef(null),b=t.useRef(null),v=t.useRef(),f=t.useRef(),E=O=>{O!=null&&v.current&&v.current(O)},G=t.useCallback(O=>{if(g.current=O,C.current=O?s.createBean(new ue):s.destroyBean(C.current),!O)return;f.current=new ae(A=>{v.current=A});const W={addOrRemoveCssClass:(A,H)=>n(_=>_.setClass(A,H)),addOrRemoveBodyCssClass:(A,H)=>i(_=>_.setClass(A,H)),setButtonWrapperDisplayed:A=>{d(H=>H.setClass("ag-hidden",!A)),u(A?"false":"true")},setWidth:A=>{g.current&&(g.current.style.width=A)},setCompDetails:A=>P(A),getFloatingFilterComp:()=>f.current?f.current:null,setMenuIcon:A=>{var H;return(H=b.current)==null?void 0:H.appendChild(A)}};e.setComp(W,O,b.current,h.current,C.current)},[]);t.useLayoutEffect(()=>he(R,s,h.current,E),[R]);const k=t.useMemo(()=>o.toString(),[o]),F=t.useMemo(()=>p.toString(),[p]),x=t.useMemo(()=>c.toString(),[c]),B=t.useMemo(()=>!!(R&&R.componentFromFramework&&de(R.componentClass)),[R]),y=t.useMemo(()=>r.get("reactiveCustomComponents"),[]),w=t.useMemo(()=>{if(R)if(y){const O=new Bt(R.params,()=>S(W=>W+1));return E(O),O}else R.componentFromFramework&&Fe()},[R]),N=w==null?void 0:w.getProps(),D=R&&R.componentFromFramework,$=R&&R.componentClass;return a.createElement("div",{ref:G,className:k,role:"gridcell"},a.createElement("div",{ref:h,className:F,role:"presentation"},D&&!y&&a.createElement($,{...R.params,ref:B?()=>{}:E}),D&&y&&a.createElement(ke.Provider,{value:{setMethods:O=>w.setMethods(O)}},a.createElement($,{...N}))),a.createElement("div",{ref:m,"aria-hidden":l,className:x,role:"presentation"},a.createElement("button",{ref:b,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},Vt=t.memo(Ut),_t=({ctrl:e})=>{const{context:s}=t.useContext(Z),[r,o]=t.useState(()=>new te),[n,p]=t.useState(()=>new te),[i,c]=t.useState("false"),[d,l]=t.useState(),[u,R]=t.useState(),P=t.useMemo(()=>e.getColId(),[]),S=t.useRef(),C=t.useRef(null),g=t.useRef(null),h=t.useRef(null),m=t.useRef(),b=t.useCallback(F=>{if(C.current=F,S.current=F?s.createBean(new ue):s.destroyBean(S.current),!F)return;const x={setWidth:B=>{C.current&&(C.current.style.width=B)},addOrRemoveCssClass:(B,y)=>o(w=>w.setClass(B,y)),setUserCompDetails:B=>R(B),setResizableDisplayed:B=>{p(y=>y.setClass("ag-hidden",!B)),c(B?"false":"true")},setAriaExpanded:B=>l(B),getUserCompInstance:()=>m.current||void 0};e.setComp(x,F,g.current,h.current,S.current)},[]);t.useLayoutEffect(()=>he(u,s,h.current),[u]),t.useEffect(()=>{C.current&&e.setDragSource(C.current)},[u]);const v=t.useMemo(()=>!!((u==null?void 0:u.componentFromFramework)&&de(u.componentClass)),[u]),f=t.useMemo(()=>"ag-header-group-cell "+r.toString(),[r]),E=t.useMemo(()=>"ag-header-cell-resize "+n.toString(),[n]),G=u&&u.componentFromFramework,k=u&&u.componentClass;return a.createElement("div",{ref:b,className:f,"col-id":P,role:"columnheader","aria-expanded":d},a.createElement("div",{ref:h,className:"ag-header-cell-comp-wrapper",role:"presentation"},G&&v&&a.createElement(k,{...u.params}),G&&!v&&a.createElement(k,{...u.params,ref:m})),a.createElement("div",{ref:g,"aria-hidden":i,className:E}))},Lt=t.memo(_t),jt=({ctrl:e})=>{const{context:s}=t.useContext(Z),{topOffset:r,rowHeight:o}=t.useMemo(()=>e.getTopAndHeight(),[]),n=e.getAriaRowIndex(),p=e.getHeaderRowClass(),[i,c]=t.useState(()=>o+"px"),[d,l]=t.useState(()=>r+"px"),u=t.useRef(null),R=t.useRef(null),[P,S]=t.useState(()=>e.getHeaderCtrls()),C=t.useRef(),g=t.useRef(null),h=t.useCallback(v=>{if(g.current=v,C.current=v?s.createBean(new ue):s.destroyBean(C.current),!v)return;const f={setHeight:E=>c(E),setTop:E=>l(E),setHeaderCtrls:(E,G,k)=>{R.current=u.current,u.current=E;const F=Pe(R.current,E,G);F!==R.current&&be(k,()=>S(F))},setWidth:E=>{g.current&&(g.current.style.width=E)}};e.setComp(f,C.current,!1)},[]),m=t.useMemo(()=>({height:i,top:d}),[i,d]),b=t.useCallback(v=>{switch(e.getType()){case Ae.COLUMN_GROUP:return a.createElement(Lt,{ctrl:v,key:v.instanceId});case Ae.FLOATING_FILTER:return a.createElement(Vt,{ctrl:v,key:v.instanceId});default:return a.createElement(Ht,{ctrl:v,key:v.instanceId})}},[]);return a.createElement("div",{ref:h,className:p,role:"row",style:m,"aria-rowindex":n},P.map(b))},zt=t.memo(jt),$t=({pinned:e})=>{const[s,r]=t.useState(!0),[o,n]=t.useState([]),{context:p}=t.useContext(Z),i=t.useRef(null),c=t.useRef(null),d=t.useRef(),l=e==="left",u=e==="right",R=!l&&!u,P=t.useCallback(g=>{if(i.current=g,d.current=g?p.createBean(new Ke(e)):p.destroyBean(d.current),!g)return;const h={setDisplayed:r,setCtrls:m=>n(m),setCenterWidth:m=>{c.current&&(c.current.style.width=m)},setViewportScrollLeft:m=>{i.current&&(i.current.scrollLeft=m)},setPinnedContainerWidth:m=>{i.current&&(i.current.style.width=m,i.current.style.minWidth=m,i.current.style.maxWidth=m)}};d.current.setComp(h,i.current)},[]),S=s?"":"ag-hidden",C=()=>o.map(g=>a.createElement(zt,{ctrl:g,key:g.instanceId}));return a.createElement(a.Fragment,null,l&&a.createElement("div",{ref:P,className:"ag-pinned-left-header "+S,"aria-hidden":!s,role:"rowgroup"},C()),u&&a.createElement("div",{ref:P,className:"ag-pinned-right-header "+S,"aria-hidden":!s,role:"rowgroup"},C()),R&&a.createElement("div",{ref:P,className:"ag-header-viewport "+S,role:"presentation"},a.createElement("div",{ref:c,className:"ag-header-container",role:"rowgroup"},C())))},Se=t.memo($t),Jt=()=>{const[e,s]=t.useState(()=>new te),[r,o]=t.useState(),{context:n}=t.useContext(Z),p=t.useRef(null),i=t.useRef(),c=t.useCallback(u=>{if(p.current=u,i.current=u?n.createBean(new qe):n.destroyBean(i.current),!u)return;const R={addOrRemoveCssClass:(P,S)=>s(C=>C.setClass(P,S)),setHeightAndMinHeight:P=>o(P)};i.current.setComp(R,u,u)},[]),d=t.useMemo(()=>"ag-header "+e.toString(),[e]),l=t.useMemo(()=>({height:r,minHeight:r}),[r]);return a.createElement("div",{ref:c,className:d,style:l,role:"presentation"},a.createElement(Se,{pinned:"left"}),a.createElement(Se,{pinned:null}),a.createElement(Se,{pinned:"right"}))},Kt=t.memo(Jt),qt=(e,s)=>{t.useEffect(()=>{const r=s.current;if(r){const o=r.parentElement;if(o){const n=document.createComment(e);return o.insertBefore(n,r),()=>{o.removeChild(n)}}}},[e])},le=qt,Qt=class{constructor(e,s){this.cellEditorParams=e,this.refreshProps=s,this.instanceCreated=new ae(r=>{this.resolveInstanceCreated=r}),this.onValueChange=r=>this.updateValue(r),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){Me(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){var s;this.componentInstance=e,(s=this.resolveInstanceCreated)==null||s.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]}updateValue(e){this.value=e,this.refreshProps()}},Yt=e=>{const s=t.useRef(e),r=t.useRef(),o=t.useRef(!1),n=t.useRef(!1),[,p]=t.useState(0);o.current&&(n.current=!0),t.useEffect(()=>(o.current||(r.current=s.current(),o.current=!0),p(i=>i+1),()=>{var i;n.current&&((i=r.current)==null||i.call(r))}),[])},Zt=e=>{const[s,r]=t.useState(),{context:o,popupService:n,localeService:p,gos:i,editService:c}=t.useContext(Z);return Yt(()=>{var f,E;const{editDetails:d,cellCtrl:l,eParentCell:u}=e,{compDetails:R}=d,P=i.get("stopEditingWhenCellsLoseFocus"),S=o.createBean(c.createPopupEditorWrapper(R.params)),C=S.getGui();if(e.jsChildComp){const G=e.jsChildComp.getGui();G&&C.appendChild(G)}const g={column:l.getColumn(),rowNode:l.getRowNode(),type:"popupCellEditor",eventSource:u,ePopup:C,position:d.popupPosition,keepWithinBounds:!0},h=n.positionPopupByComponent.bind(n,g),m=p.getLocaleTextFunc(),b=n.addPopup({modal:P,eChild:C,closeOnEsc:!0,closedCallback:()=>{l.onPopupEditorClosed()},anchorToElement:u,positionCallback:h,ariaLabel:m("ariaLabelCellEditor","Cell Editor")}),v=b?b.hideFunc:void 0;return r(S),(E=(f=e.jsChildComp)==null?void 0:f.afterGuiAttached)==null||E.call(f),()=>{v==null||v(),o.destroyBean(S)}}),a.createElement(a.Fragment,null,s&&e.wrappedContent&&Te.createPortal(e.wrappedContent,s.getGui()))},Oe=t.memo(Zt),Xt=(e,s,r,o,n,p)=>{const{context:i}=t.useContext(Z),c=t.useCallback(()=>{const d=n.current;if(!d)return;const l=d.getGui();l&&l.parentElement&&l.parentElement.removeChild(l),i.destroyBean(d),n.current=void 0},[]);t.useEffect(()=>{const d=e!=null,l=(e==null?void 0:e.compDetails)&&!e.compDetails.componentFromFramework,u=s&&r==null;if(!(d&&l&&!u)){c();return}const P=e.compDetails;if(n.current){const C=n.current,h=C.refresh!=null&&e.force==!1?C.refresh(P.params):!1;if(h===!0||h===void 0)return;c()}const S=P.newAgStackInstance();S!=null&&S.then(C=>{if(!C)return;const g=C.getGui();if(!g)return;(s?r:p.current).appendChild(g),n.current=C})},[e,s,o]),t.useEffect(()=>c,[])},es=Xt,ts=(e,s,r)=>{const{compProxy:o}=e;r(o);const n=o.getProps(),p=de(s);return a.createElement(ke.Provider,{value:{setMethods:i=>o.setMethods(i)}},p?a.createElement(s,{...n}):a.createElement(s,{...n,ref:i=>o.setRef(i)}))},De=(e,s,r)=>{const o=e.compProxy;return a.createElement(a.Fragment,null,o?ts(e,s,r):a.createElement(s,{...e.compDetails.params,ref:r}))},ss=(e,s,r,o,n)=>{const p=e.compDetails,i=p.componentClass,c=p.componentFromFramework&&!e.popup,d=p.componentFromFramework&&e.popup,l=!p.componentFromFramework&&e.popup;return a.createElement(a.Fragment,null,c&&De(e,i,s),d&&a.createElement(Oe,{editDetails:e,cellCtrl:o,eParentCell:r,wrappedContent:De(e,i,s)}),l&&n&&a.createElement(Oe,{editDetails:e,cellCtrl:o,eParentCell:r,jsChildComp:n}))},rs=(e,s,r,o,n,p,i)=>{const{compDetails:c,value:d}=e,l=!c,u=c&&c.componentFromFramework,R=c&&c.componentClass,P=d!=null&&d.toString?d.toString():d,S=()=>a.createElement(a.Fragment,null,l&&a.createElement(a.Fragment,null,P),u&&!p&&a.createElement(R,{...c.params,key:s,ref:o}),u&&p&&a.createElement(R,{...c.params,key:s}));return a.createElement(a.Fragment,null,n?a.createElement("span",{role:"presentation",id:`cell-${r}`,className:"ag-cell-value",ref:i},S()):S())},ns=({cellCtrl:e,printLayout:s,editingRow:r})=>{const{context:o}=t.useContext(Z),{colIdSanitised:n,instanceId:p}=e,i=t.useRef(),[c,d]=t.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[l,u]=t.useState(),[R,P]=t.useState(1),[S,C]=t.useState(),[g,h]=t.useState(!1),[m,b]=t.useState(!1),[v,f]=t.useState(!1),[E,G]=t.useState(),k=t.useMemo(()=>e.isForceWrapper(),[e]),F=t.useMemo(()=>e.getCellAriaRole(),[e]),x=t.useRef(null),B=t.useRef(null),y=t.useRef(),w=t.useRef(),N=t.useRef(),D=t.useRef([]),$=t.useRef(),[O,W]=t.useState(0),A=t.useCallback(U=>{$.current=U,W(K=>K+1)},[]),H=c!=null&&(g||v||m),_=k||H,V=t.useCallback(U=>{if(w.current=U,U){const K=U.isCancelBeforeStart&&U.isCancelBeforeStart();setTimeout(()=>{K?(e.stopEditing(!0),e.focusCell(!0)):e.cellEditorAttached()})}},[e]),I=t.useRef();I.current||(I.current=new Re(()=>x.current)),es(c,_,$.current,O,y,x);const X=t.useRef();t.useLayoutEffect(()=>{var Y;const U=X.current,K=c;if(X.current=c,U==null||U.compDetails==null||K==null||K.compDetails==null)return;const Q=U.compDetails,T=K.compDetails;if(Q.componentClass!=T.componentClass||((Y=B.current)==null?void 0:Y.refresh)==null)return;B.current.refresh(T.params)!=!0&&P(z=>z+1)},[c]),t.useLayoutEffect(()=>{if(!(l&&!l.compDetails.componentFromFramework))return;const K=l.compDetails,Q=l.popup===!0,T=K.newAgStackInstance();return T.then(q=>{if(!q)return;const Y=q.getGui();if(V(q),!Q){const z=(k?N:x).current;z==null||z.appendChild(Y),q.afterGuiAttached&&q.afterGuiAttached()}G(q)}),()=>{T.then(q=>{var z;const Y=q.getGui();o.destroyBean(q),V(void 0),G(void 0),(z=Y==null?void 0:Y.parentElement)==null||z.removeChild(Y)})}},[l]);const M=t.useCallback(U=>{if(N.current=U,!U){D.current.forEach(Q=>Q()),D.current=[];return}const K=Q=>{if(Q){const T=Q.getGui();U.insertAdjacentElement("afterbegin",T),D.current.push(()=>{o.destroyBean(Q),lt(T)})}return Q};if(g){const Q=e.createSelectionCheckbox();K(Q)}v&&K(e.createDndSource()),m&&K(e.createRowDragComp())},[e,o,v,m,g]),L=t.useCallback(U=>{if(x.current=U,i.current=U?o.createBean(new ue):o.destroyBean(i.current),!U||!e)return;const K={addOrRemoveCssClass:(T,q)=>I.current.addOrRemoveCssClass(T,q),setUserStyles:T=>C(T),getFocusableElement:()=>x.current,setIncludeSelection:T=>h(T),setIncludeRowDrag:T=>b(T),setIncludeDndSource:T=>f(T),getCellEditor:()=>w.current||null,getCellRenderer:()=>B.current??y.current,getParentOfValue:()=>$.current??N.current??x.current,setRenderDetails:(T,q,Y)=>{d(z=>(z==null?void 0:z.compDetails)!==T||(z==null?void 0:z.value)!==q||(z==null?void 0:z.force)!==Y?{value:q,compDetails:T,force:Y}:z)},setEditDetails:(T,q,Y,z)=>{if(T){let ce;z?ce=new Qt(T.params,()=>P(ye=>ye+1)):T.componentFromFramework&&Fe(),u({compDetails:T,popup:q,popupPosition:Y,compProxy:ce}),q||d(void 0)}else u(ce=>{ce!=null&&ce.compProxy&&(w.current=void 0)})}},Q=N.current||void 0;e.setComp(K,U,Q,s,r,i.current)},[]),j=t.useMemo(()=>{var K;return!!(((K=c==null?void 0:c.compDetails)==null?void 0:K.componentFromFramework)&&de(c.compDetails.componentClass))},[c]);t.useLayoutEffect(()=>{var U;x.current&&(I.current.addOrRemoveCssClass("ag-cell-value",!_),I.current.addOrRemoveCssClass("ag-cell-inline-editing",!!l&&!l.popup),I.current.addOrRemoveCssClass("ag-cell-popup-editing",!!l&&!!l.popup),I.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!l||!!l.popup),(U=e.getRowCtrl())==null||U.setInlineEditingCss(),e.shouldRestoreFocus()&&!e.isEditing()&&x.current.focus({preventScroll:!0}))});const re=()=>a.createElement(a.Fragment,null,c!=null&&rs(c,R,p,B,_,j,A),l!=null&&ss(l,V,x.current,e,E)),ie=t.useCallback(()=>e.onFocusOut(),[]);return a.createElement("div",{ref:L,style:S,role:F,"col-id":n,onBlur:ie},_?a.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:M},re()):re())},os=t.memo(ns),as=({rowCtrl:e,containerType:s})=>{const{context:r,gos:o}=t.useContext(Z),n=t.useRef(),p=t.useRef(e.getDomOrder()),i=e.isFullWidth(),c=e.getRowNode().displayed,[d,l]=t.useState(()=>c?e.getRowIndex():null),[u,R]=t.useState(()=>e.getRowId()),[P,S]=t.useState(()=>e.getBusinessKey()),[C,g]=t.useState(()=>e.getRowStyles()),h=t.useRef(null),m=t.useRef(null),[b,v]=t.useState(()=>null),[f,E]=t.useState(),[G,k]=t.useState(()=>c?e.getInitialRowTop(s):void 0),[F,x]=t.useState(()=>c?e.getInitialTransform(s):void 0),B=t.useRef(null),y=t.useRef(),w=t.useRef(!1),[N,D]=t.useState(0);t.useEffect(()=>{var L;if(w.current||!f||N>10)return;const M=(L=B.current)==null?void 0:L.firstChild;M?(e.setupDetailRowAutoHeight(M),w.current=!0):D(j=>j+1)},[f,N]);const $=t.useRef();$.current||($.current=new Re(()=>B.current));const O=t.useCallback(M=>{if(B.current=M,n.current=M?r.createBean(new ue):r.destroyBean(n.current),!M){e.unsetComp(s);return}if(!e.isAlive())return;const L={setTop:k,setTransform:x,addOrRemoveCssClass:(j,re)=>$.current.addOrRemoveCssClass(j,re),setDomOrder:j=>p.current=j,setRowIndex:l,setRowId:R,setRowBusinessKey:S,setUserStyles:g,setCellCtrls:(j,re)=>{m.current=h.current,h.current=j;const ie=Pe(m.current,j,p.current);ie!==m.current&&be(re,()=>v(ie))},showFullWidth:j=>E(j),getFullWidthCellRenderer:()=>y.current,refreshFullWidth:j=>V.current?(E(re=>({...re,params:j()})),!0):!y.current||!y.current.refresh?!1:y.current.refresh(j())};e.setComp(L,M,s,n.current)},[]);t.useLayoutEffect(()=>he(f,r,B.current,y),[f]);const W=t.useMemo(()=>{const M={top:G,transform:F};return Object.assign(M,C),M},[G,F,C]),A=i&&(f==null?void 0:f.componentFromFramework),H=!i&&b!=null,_=t.useMemo(()=>!!((f==null?void 0:f.componentFromFramework)&&de(f.componentClass)),[f]),V=t.useRef(!1);t.useEffect(()=>{V.current=_&&!!f&&!!o.get("reactiveCustomComponents")},[_,f]);const I=()=>b==null?void 0:b.map(M=>a.createElement(os,{cellCtrl:M,editingRow:e.isEditing(),printLayout:e.isPrintLayout(),key:M.instanceId})),X=()=>{const M=f.componentClass;return a.createElement(a.Fragment,null,_?a.createElement(M,{...f.params}):a.createElement(M,{...f.params,ref:y}))};return a.createElement("div",{ref:O,role:"row",style:W,"row-index":d,"row-id":u,"row-business-key":P},H&&I(),A&&X())},cs=t.memo(as),ls=({name:e})=>{const{context:s}=t.useContext(Z),r=t.useMemo(()=>Qe(e),[e]),o=t.useRef(null),n=t.useRef(null),p=t.useRef([]),i=t.useRef([]),[c,d]=t.useState(()=>[]),l=t.useRef(!1),u=t.useRef(),R=t.useMemo(()=>se(r.viewport),[r]),P=t.useMemo(()=>se(r.container),[r]),S=r.type==="center",C=S?o:n;le(" AG Row Container "+e+" ",C);const g=t.useCallback(()=>S?o.current!=null&&n.current!=null:n.current!=null,[]),h=t.useCallback(()=>S?o.current==null&&n.current==null:n.current==null,[]),m=t.useCallback(()=>{if(h()&&(u.current=s.destroyBean(u.current)),g()){const E=k=>{const F=Pe(i.current,p.current,l.current);F!==i.current&&(i.current=F,be(k,()=>d(F)))},G={setHorizontalScroll:k=>{o.current&&(o.current.scrollLeft=k)},setViewportHeight:k=>{o.current&&(o.current.style.height=k)},setRowCtrls:({rowCtrls:k,useFlushSync:F})=>{const x=!!F&&p.current.length>0&&k.length>0;p.current=k,E(x)},setDomOrder:k=>{l.current!=k&&(l.current=k,E(!1))},setContainerWidth:k=>{n.current&&(n.current.style.width=k)},setOffsetTop:k=>{n.current&&(n.current.style.transform=`translateY(${k})`)}};u.current=s.createBean(new Ye(e)),u.current.setComp(G,n.current,o.current)}},[g,h]),b=t.useCallback(E=>{n.current=E,m()},[m]),v=t.useCallback(E=>{o.current=E,m()},[m]),f=()=>a.createElement("div",{className:P,ref:b,role:"rowgroup"},c.map(E=>a.createElement(cs,{rowCtrl:E,containerType:r.type,key:E.instanceId})));return a.createElement(a.Fragment,null,S?a.createElement("div",{className:R,ref:v,role:"presentation"},f()):f())},is=t.memo(ls),us=()=>{const{context:e,resizeObserverService:s}=t.useContext(Z),[r,o]=t.useState(""),[n,p]=t.useState(0),[i,c]=t.useState(0),[d,l]=t.useState("0px"),[u,R]=t.useState("0px"),[P,S]=t.useState("100%"),[C,g]=t.useState("0px"),[h,m]=t.useState("0px"),[b,v]=t.useState("100%"),[f,E]=t.useState(""),[G,k]=t.useState(""),[F,x]=t.useState(null),[B,y]=t.useState(""),[w,N]=t.useState(null),[D,$]=t.useState("ag-layout-normal"),O=t.useRef();O.current||(O.current=new Re(()=>W.current));const W=t.useRef(null),A=t.useRef(null),H=t.useRef(null),_=t.useRef(null),V=t.useRef(null),I=t.useRef(null),X=t.useRef(null),M=t.useRef([]),L=t.useRef([]);le(" AG Grid Body ",W),le(" AG Pinned Top ",A),le(" AG Sticky Top ",H),le(" AG Middle ",I),le(" AG Pinned Bottom ",X);const j=t.useCallback(ne=>{if(W.current=ne,!ne){M.current=e.destroyBeans(M.current),L.current.forEach(J=>J()),L.current=[];return}if(!e)return;const fe=(J,ee)=>{J.appendChild(ee),L.current.push(()=>J.removeChild(ee))},ve=J=>{const ee=e.createBean(new J);return M.current.push(ee),ee},me=(J,ee,ze)=>{fe(J,document.createComment(ze)),fe(J,ve(ee).getGui())};me(ne,it," AG Fake Horizontal Scroll "),me(ne,ut," AG Overlay Wrapper "),V.current&&me(V.current,dt," AG Fake Vertical Scroll ");const je={setRowAnimationCssOnBodyViewport:o,setColumnCount:J=>{W.current&&pt(W.current,J)},setRowCount:J=>{W.current&&mt(W.current,J)},setTopHeight:p,setBottomHeight:c,setStickyTopHeight:l,setStickyTopTop:R,setStickyTopWidth:S,setTopDisplay:E,setBottomDisplay:k,setColumnMovingCss:(J,ee)=>O.current.addOrRemoveCssClass(J,ee),updateLayoutClasses:$,setAlwaysVerticalScrollClass:x,setPinnedTopBottomOverflowY:y,setCellSelectableCss:(J,ee)=>N(ee?J:null),setBodyViewportWidth:J=>{I.current&&(I.current.style.width=J)},registerBodyViewportResizeListener:J=>{if(I.current){const ee=s.observeResize(I.current,J);L.current.push(()=>ee())}},setStickyBottomHeight:g,setStickyBottomBottom:m,setStickyBottomWidth:v},Be=e.createBean(new Ze);M.current.push(Be),Be.setComp(je,ne,I.current,A.current,X.current,H.current,_.current)},[]),re=t.useMemo(()=>se("ag-root","ag-unselectable",D),[D]),ie=t.useMemo(()=>se("ag-body-viewport",r,D,F,w),[r,D,F,w]),U=t.useMemo(()=>se("ag-body",D),[D]),K=t.useMemo(()=>se("ag-floating-top",w),[w]),Q=t.useMemo(()=>se("ag-sticky-top",w),[w]),T=t.useMemo(()=>se("ag-sticky-bottom",C==="0px"?"ag-hidden":null,w),[w,C]),q=t.useMemo(()=>se("ag-floating-bottom",w),[w]),Y=t.useMemo(()=>({height:n,minHeight:n,display:f,overflowY:B}),[n,f,B]),z=t.useMemo(()=>({height:d,top:u,width:P}),[d,u,P]),ce=t.useMemo(()=>({height:C,bottom:h,width:b}),[C,h,b]),ye=t.useMemo(()=>({height:i,minHeight:i,display:G,overflowY:B}),[i,G,B]),Le=ne=>a.createElement(is,{name:ne,key:`${ne}-container`}),pe=({section:ne,children:fe,className:ve,style:me})=>a.createElement("div",{ref:ne,className:ve,role:"presentation",style:me},fe.map(Le));return a.createElement("div",{ref:j,className:re,role:"treegrid"},a.createElement(Kt,null),pe({section:A,className:K,style:Y,children:["topLeft","topCenter","topRight","topFullWidth"]}),a.createElement("div",{className:U,ref:V,role:"presentation"},pe({section:I,className:ie,children:["left","center","right","fullWidth"]})),pe({section:H,className:Q,style:z,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),pe({section:_,className:T,style:ce,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),pe({section:X,className:q,style:ye,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},ds=t.memo(us),ps=(e,s)=>{const{children:r,eFocusableElement:o,onTabKeyDown:n,gridCtrl:p,forceFocusOutWhenTabGuardsAreEmpty:i}=e,{context:c}=t.useContext(Z),d=t.useRef(null),l=t.useRef(null),u=t.useRef(),R=h=>{const m=h==null?void 0:parseInt(h,10).toString();[d,l].forEach(b=>{var v,f;m===void 0?(v=b.current)==null||v.removeAttribute("tabindex"):(f=b.current)==null||f.setAttribute("tabindex",m)})};t.useImperativeHandle(s,()=>({forceFocusOutOfContainer(h){var m;(m=u.current)==null||m.forceFocusOutOfContainer(h)}}));const P=t.useCallback(()=>{const h=d.current,m=l.current;if(!h&&!m){u.current=c.destroyBean(u.current);return}if(h&&m){const b={setTabIndex:R};u.current=c.createBean(new Xe({comp:b,eTopGuard:h,eBottomGuard:m,eFocusableElement:o,onTabKeyDown:n,forceFocusOutWhenTabGuardsAreEmpty:i,focusInnerElement:v=>p.focusInnerElement(v)}))}},[]),S=t.useCallback(h=>{d.current=h,P()},[P]),C=t.useCallback(h=>{l.current=h,P()},[P]),g=h=>{const m=h==="top"?we.TAB_GUARD_TOP:we.TAB_GUARD_BOTTOM;return a.createElement("div",{className:`${we.TAB_GUARD} ${m}`,role:"presentation",ref:h==="top"?S:C})};return a.createElement(a.Fragment,null,g("top"),r,g("bottom"))},ms=t.forwardRef(ps),hs=t.memo(ms),fs=({context:e})=>{const[s,r]=t.useState(""),[o,n]=t.useState(""),[p,i]=t.useState(""),[c,d]=t.useState(null),[l,u]=t.useState(null),[R,P]=t.useState(!1),[S,C]=t.useState(),g=t.useRef(),h=t.useRef(null),m=t.useRef(),[b,v]=t.useState(null),f=t.useRef(()=>{}),E=t.useRef(),G=t.useRef([]),k=t.useCallback(()=>{},[]),F=t.useMemo(()=>e.isDestroyed()?null:e.getBeans(),[e]);le(" AG Grid ",h);const x=t.useCallback(D=>{if(h.current=D,g.current=D?e.createBean(new et):e.destroyBean(g.current),!D||e.isDestroyed())return;const $=g.current;f.current=$.focusInnerElement.bind($);const O={destroyGridUi:()=>{},setRtlClass:r,setGridThemeClass:n,forceFocusOutOfContainer:W=>{var A,H;if(!W&&((A=E.current)!=null&&A.isDisplayed())){E.current.forceFocusOutOfContainer(W);return}(H=m.current)==null||H.forceFocusOutOfContainer(W)},updateLayoutClasses:i,getFocusableContainers:()=>{var H;const W=[],A=(H=h.current)==null?void 0:H.querySelector(".ag-root");return A&&W.push({getGui:()=>A}),G.current.forEach(_=>{_.isDisplayed()&&W.push(_)}),W},setCursor:d,setUserSelect:u};$.setComp(O,D,D),P(!0)},[]);t.useEffect(()=>{const D=g.current,$=h.current;if(!S||!F||!D||!b||!$)return;const O=[],{watermarkSelector:W,paginationSelector:A,sideBarSelector:H,statusBarSelector:_,gridHeaderDropZonesSelector:V}=D.getOptionalSelectors(),I=[];if(V){const M=e.createBean(new V.component),L=M.getGui();$.insertAdjacentElement("afterbegin",L),I.push(L),O.push(M)}if(H){const M=e.createBean(new H.component),L=M.getGui(),j=b.querySelector(".ag-tab-guard-bottom");j&&(j.insertAdjacentElement("beforebegin",L),I.push(L)),O.push(M),G.current.push(M)}const X=M=>{const L=e.createBean(new M),j=L.getGui();return $.insertAdjacentElement("beforeend",j),I.push(j),O.push(L),L};if(_&&X(_.component),A){const M=X(A.component);E.current=M,G.current.push(M)}return W&&X(W.component),()=>{e.destroyBeans(O),I.forEach(M=>{var L;(L=M.parentElement)==null||L.removeChild(M)})}},[S,b,F]);const B=t.useMemo(()=>se("ag-root-wrapper",s,o,p),[s,o,p]),y=t.useMemo(()=>se("ag-root-wrapper-body","ag-focus-managed",p),[p]),w=t.useMemo(()=>({userSelect:l??"",WebkitUserSelect:l??"",cursor:c??""}),[l,c]),N=t.useCallback(D=>{m.current=D,C(D!==null)},[]);return a.createElement("div",{ref:x,className:B,style:w,role:"presentation"},a.createElement("div",{className:y,ref:v,role:"presentation"},R&&b&&F&&a.createElement(Z.Provider,{value:F},a.createElement(hs,{ref:N,eFocusableElement:b,onTabKeyDown:k,gridCtrl:g.current,forceFocusOutWhenTabGuardsAreEmpty:!0},a.createElement(ds,null)))))},Cs=t.memo(fs),gs=class extends gt{wireBeans(e){this.ctrlsService=e.ctrlsService}areHeaderCellsRendered(){return this.ctrlsService.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(s=>s.areCellsRendered()))}},_e=e=>{var h;const s=t.useRef(),r=t.useRef(null),o=t.useRef(null),n=t.useRef([]),p=t.useRef([]),i=t.useRef(e),c=t.useRef(),d=t.useRef(),l=t.useRef(!1),[u,R]=t.useState(void 0),[,P]=t.useState(0),S=t.useCallback(m=>{if(r.current=m,!m){n.current.forEach(y=>y()),n.current.length=0;return}const b=e.modules||[];o.current||(o.current=new Tt(()=>P(y=>y+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),n.current.push(()=>{var y;(y=o.current)==null||y.destroy(),o.current=null}));const v=tt(e.gridOptions,e),f=()=>{if(l.current){const y=()=>{var N;return(N=c.current)!=null&&N.shouldQueueUpdates()?void 0:p.current.shift()};let w=y();for(;w;)w(),w=y()}},E=new ws(f);c.current=E;const G=new gs,k={providedBeanInstances:{frameworkComponentWrapper:new ys(o.current,v.reactiveCustomComponents??st("reactiveCustomComponents")??!0),renderStatusService:G},modules:b,frameworkOverrides:E},F=y=>{R(y),y.createBean(G),n.current.push(()=>{y.destroy()}),y.getBean("ctrlsService").whenReady({addDestroyFunc:w=>{n.current.push(w)}},()=>{var N;if(y.isDestroyed())return;const w=s.current;w&&((N=e.setGridApi)==null||N.call(e,w))})},x=y=>{y.getBean("ctrlsService").whenReady({addDestroyFunc:w=>{n.current.push(w)}},()=>{p.current.forEach(w=>w()),p.current.length=0,l.current=!0})},B=new ht;v.gridId??(v.gridId=d.current),s.current=B.create(m,v,F,x,k),n.current.push(()=>{s.current=void 0}),d.current=s.current.getGridId()},[]),C=t.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),g=t.useCallback(m=>{var b;l.current&&!((b=c.current)!=null&&b.shouldQueueUpdates())?m():p.current.push(m)},[]);return t.useEffect(()=>{const m=Rs(i.current,e);i.current=e,g(()=>{s.current&&rt(m,s.current)})},[e]),a.createElement("div",{style:C,className:e.className,ref:S},u&&!u.isDestroyed()?a.createElement(Cs,{context:u}):null,((h=o.current)==null?void 0:h.getPortals())??null)};function Rs(e,s){const r={};return Object.keys(s).forEach(o=>{const n=s[o];e[o]!==n&&(r[o]=n)}),r}var ys=class extends nt{constructor(e,s){super(),this.parent=e,this.reactiveCustomComponents=s}createWrapper(e,s){if(this.reactiveCustomComponents){const n=(p=>{switch(p){case"filter":return Ft;case"floatingFilterComponent":return At;case"dateComponent":return kt;case"dragAndDropImageComponent":return Mt;case"loadingOverlayComponent":return Gt;case"noRowsOverlayComponent":return xt;case"statusPanel":return Ot;case"toolPanel":return Dt;case"menuItem":return It;case"cellRenderer":return Pt}})(s.propertyName);if(n)return new n(e,this.parent,s)}else switch(s.propertyName){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":Fe();break}const r=!s.cellRenderer&&s.propertyName!=="toolPanel";return new Ue(e,this.parent,s,r)}},vs=t.forwardRef((e,s)=>{const{ctrlsFactory:r,context:o,gos:n,resizeObserverService:p,rowModel:i}=t.useContext(Z),[c,d]=t.useState(()=>new te),[l,u]=t.useState(()=>new te),[R,P]=t.useState(),[S,C]=t.useState(),g=t.useRef(),h=t.useRef(null),m=t.useRef(),b=t.useMemo(()=>Je.__getGridRegisteredModules(e.api.getGridId()),[e]),v=t.useMemo(()=>c.toString()+" ag-details-row",[c]),f=t.useMemo(()=>l.toString()+" ag-details-grid",[l]);s&&t.useImperativeHandle(s,()=>({refresh(){var k;return((k=g.current)==null?void 0:k.refresh())??!1}})),e.template&&ge("detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://ag-grid.com/react-data-grid/master-detail-custom-detail/");const E=t.useCallback(k=>{var B;if(h.current=k,!k){g.current=o.destroyBean(g.current),(B=m.current)==null||B.call(m);return}const F={addOrRemoveCssClass:(y,w)=>d(N=>N.setClass(y,w)),addOrRemoveDetailGridCssClass:(y,w)=>u(N=>N.setClass(y,w)),setDetailGrid:y=>P(y),setRowData:y=>C(y),getGui:()=>h.current},x=r.getInstance("detailCellRenderer");if(x&&(o.createBean(x),x.init(F,e),g.current=x,n.get("detailRowAutoHeight"))){const y=()=>{if(h.current==null)return;const w=h.current.clientHeight;w!=null&&w>0&&setTimeout(()=>{e.node.setRowHeight(w),(ft(n)||Ct(n))&&i.onRowHeightChanged()},0)};m.current=p.observeResize(k,y),y()}},[]),G=t.useCallback(k=>{var F;(F=g.current)==null||F.registerDetailWithMaster(k)},[]);return a.createElement("div",{className:v,ref:E},R&&a.createElement(_e,{className:f,...R,modules:b,rowData:S,setGridApi:G}))}),ws=class extends ot{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.frameworkComponents={agGroupCellRenderer:Ie,agGroupRowRenderer:Ie,agDetailCellRenderer:vs},this.wrapIncoming=(s,r)=>r==="ensureVisible"?wt(s):s(),this.renderingEngine="react"}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const s=e.prototype;return!(s&&"getGui"in s)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return vt()}},Ps=class extends t.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach(s=>s(e))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return a.createElement(_e,{...this.props,setGridApi:this.setGridApi})}};export{Ps as A};
